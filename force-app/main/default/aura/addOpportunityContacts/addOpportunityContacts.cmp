<aura:component controller="OpportunityContactsController" implements="lightning:availableForFlowScreens">
    
    <aura:handler name="init" value="{!this}" action="{!c.onInit}"/>
    <aura:attribute name="selectedAccount" type="Account"/>
    <aura:attribute name="contactRole" type="OpportunityContactRole"/>
    <aura:attribute name="contacts" type="Contact[]"/>
    <aura:attribute name="contactColumns" type="Map[]"/>
    <aura:attribute name="contactRoles" type="OpportunityContactRole[]"/>
    <aura:attribute name="contactRoleColumns" type="Map[]"/>
    <aura:attribute name="isTableEmpty" type="Boolean" default="true"/>
    <aura:attribute name="roles" type="List"/>
    <aura:attribute name="showError" type="Boolean" default="false"/>
    <aura:attribute name="message" type="String"/>
    
    <lightning:card title="Contacts" iconName="standard:product">
        <lightning:datatable
                             aura:id="contactsTable"
                             data="{!v.contacts}"
                             columns="{!v.contactColumns}"
                             keyField="Id"
                             maxRowSelection="1"
                             onrowselection="{!c.selectContact}"/>
    </lightning:card>
    
    <div class="slds-grid slds-gutters slds-p-bottom_small">
        <div class="slds-col slds-size_1-of-2">
           <!-- <lightning:input aura:id="quantity" type="number" label="Quantity" required="true" min="1" max="1000" /> -->
           <lightning:combobox aura:id="role" label="Role" options="{!v.roles}"/>
        </div>
        <div class="slds-col slds-size_1-of-2">
            <lightning:input aura:id="primary" type="checkbox" label="Primary" disabled="false"/>
        </div>
    </div>

    <aura:if isTrue="{!v.showError}">
        <div class="slds-align_absolute-center slds-text-color_error">
            {!v.message}
        </div>
    </aura:if>
    
    <lightning:button label="Add to Opportunity contacts" class="slds-align_absolute-center" onclick="{!c.handleSaveContact}"/>
    
    <aura:if isTrue="{!v.isTableEmpty}">
        No contacts added
        <aura:set attribute="else">
            <lightning:card title="Opportunity Contact Roles" iconName="standard:product">
                <lightning:datatable
                                     data="{!v.contactRoles}"
                                     columns="{!v.contactRoleColumns}"
                                     keyField="Id"
                                     hideCheckboxColumn="true"/>
            </lightning:card>
        </aura:set>
    </aura:if>
</aura:component>